---
import LogoutButton from '@components/core/LogoutButton.astro';
import UserAvatar from '@components/community/UserAvatar.astro';
import type { User } from '@supabase/supabase-js';

interface Props { user: User | null; }
const { user } = Astro.props;
---
---

<header class="bg-zinc-800/70 backdrop-blur-md border-b border-zinc-700 sticky top-0 z-50">
  <nav class="max-w-7xl mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Lado Esquerdo - Logo -->
      <div class="flex-shrink-0">
        <a href="/" class="text-2xl font-bold text-white hover:text-blue-400 transition-colors">
          Alfa Research
        </a>
      </div>

      <!-- Centro - Links de Navegação (Desktop) -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="/" class="text-zinc-300 hover:text-white transition-colors font-medium">
          Feed
        </a>
        <a href="/membros" class="text-zinc-300 hover:text-white transition-colors font-medium">
          Membros
        </a>
        <a href="/cursos" class="text-zinc-300 hover:text-white transition-colors font-medium">
          Cursos
        </a>
      </div>

      <!-- Lado Direito - User/Actions -->
      <div class="flex items-center gap-4">
        {user ? (
          <>
            <span class="text-sm text-zinc-200">
              Olá, {user.user_metadata.full_name || user.email}
            </span>
            <UserAvatar 
              src={user.user_metadata?.avatar_url}
              alt={user.user_metadata?.full_name}
              size="md"
            />
            <LogoutButton />
          </>
        ) : (
          <>
            <a href="/login" class="text-sm font-medium text-zinc-300 hover:text-teal-400">
              Login
            </a>
            <a href="/cadastro" class="text-sm font-medium bg-teal-500 text-zinc-900 px-3 py-1.5 rounded-md hover:bg-teal-400 transition-colors">
              Cadastro
            </a>
          </>
        )}
      </div>
    </div>
  </nav>
</header>